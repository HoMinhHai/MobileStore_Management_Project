@using DAMH_MuaBanVaSuaChuaDienThoai.Models
@{
    ViewBag.Title = "Home";
    Shared shared = new Shared();
    var phones = ViewBag.Phones;
    var accessories = ViewBag.Accessories;
}

<style>
    .dot__index {
        background: rgb(157 151 151) !important;
    }

    .content__category {
        margin-top: 80px;
    }

    .content__banner img {
        height: 400px !important;
    }

    .policy__item-body .policy__img {
        height: 70px;
    }

    .circle-btn.absolute {
        left: 50%;
    }

    .content__policy {
        background: url('https://www.topzone.vn/images/newyear/desktop/policy-bg.png') center / cover no-repeat;
        padding: 0;
        margin: 0;
    }

    .content__policy img {
        width: 100px;
    }

    .policy__item-body p {
        padding: 12px 0 16px;
    }

    .category__list {
        padding-bottom: 40px;
    }

    .category__item {
        background: initial;
        padding: 0;
    }

        .category__item img {
            width: 150px;
        }

    .product__type img {
        width: 430px;
    }

    .product__list {
        padding-bottom: 30px;
    }

    .decor__item {
        position: absolute;
        left: var(--l);
        right: var(--r);
        top: -80px;
        width: 180px;
    }
</style>


<div class="content__banner">
    <div id="carouselExampleIndicators" class="carousel slide relative" data-ride="carousel">
        <ol class="carousel-indicators dot__list" style="transform: initial">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active dot__index"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1" class="dot__index"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2" class="dot__index"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="3" class="dot__index"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="4" class="dot__index"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="~/Assets/Image/Banner/Home/banner1.jpg" />
            </div>

            <div class="carousel-item">
                <img src="~/Assets/Image/Banner/Phone/banner1.jpg" />
            </div>

            <div class="carousel-item">
                <img src="~/Assets/Image/Banner/Home/banner2.jpg" />
            </div>

            <div class="carousel-item">
                <img src="~/Assets/Image/Banner/Home/banner3.jpg" />
            </div>

            <div class="carousel-item">
                <img src="~/Assets/Image/Banner/Accessory/banner2.jpg" />
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <i class="fa-solid fa-arrow-left circle-btn absolute"></i>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <i class="fa-solid fa-arrow-right circle-btn absolute"></i>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<div class="content__policy">
    <div class="wide grid">
        <div class="row ali-start jus-between policy__list">
            <div class="h-3 l-3 m-6 s-6 text-center policy__item">
                <div class="policy__item-body">
                    <img src="~/Assets/Image/Layout/Policy/checked.png" />
                    <div class="forsure">
                        <p>Mẫu mã đa dạng,<br /> chính hãng</p>
                    </div>
                </div>
            </div>
            <div class="h-3 l-3 m-6 s-6 text-center policy__item">
                <div class="policy__item-body">
                    <img src="~/Assets/Image/Layout/Policy/truck.png" />
                    <div class="forsure">
                        <p>Giao hàng toàn quốc</p>
                    </div>
                </div>
            </div>
            <div class="h-3 l-3 m-6 s-6 text-center policy__item">
                <div class="policy__item-body">
                    <img src="~/Assets/Image/Layout/Policy/shield.png" />
                    <div class="forsure">
                        <p>Bảo hành cam kết <br /> tới 12 tháng</p>
                    </div>
                </div>
            </div>
            <div class="h-3 l-3 m-6 s-6 text-center policy__item">
                <div class="policy__item-body">
                    <img src="~/Assets/Image/Layout/Policy/back.png" />
                    <div class="forsure">
                        <p class="text-center">Có thể đổi trả tại <br /> Thegioididong và DienMaXANH</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="wide grid relative">
    <div class="content__category">
        <div class="category__list">
            <div class="row ali-center jus-center">
                <div class="forsure">
                    <a href="/Store/Phone" class="category__item row flex-column ali-center">
                        <div class="forsure">
                            <img src="~/Assets/Image/Layout/Category/phone-category.jpg" />
                        </div>
                    </a>
                </div>

                <div class="forsure">
                    <a href="/Store/Accessory" class="category__item row flex-column ali-center">
                        <div class="forsure">
                            <img src="~/Assets/Image/Layout/Category/accessory-category.jpg" />
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <img src="~/Assets/Image/Layout/Decoration/newyear-left.jpg" class="decor__item" style="--l:0" />
    <img src="~/Assets/Image/Layout/Decoration/newyear-right.jpg" class="decor__item" style="--r:0" />

    <div class="product__list">
        <div class="text-center">
            <a href="/Store/Phone" class="product__type">
                <img src="~/Assets/Image/Layout/Tag/phone-tag.png" />
            </a>
        </div>
        <div class="row relative w-100">
            @foreach (var product in phones)
            {
                <div class="h-3">
                    <div id="@product.SP_MaDT1[0]" class="carousel slide carousel-fade relative" data-interval="false">
                        <div class="product__memory">
                            <ol class="carousel-indicators" style="transform: initial">
                                @{
                                    for (int i = 0; i < product.SP_DungLuongDT1.Count; i++)
                                    {
                                        var dungLuong = product.SP_DungLuongDT1[i];

                                        <li data-target="#@product.SP_MaDT1[0]" data-slide-to="@i" class="">@dungLuong</li>
                                    }
                                }
                            </ol>
                        </div>
                        <div class="carousel-inner">
                            @for (int i = 0; i < product.SP_MaDT1.Count; i++)
                            {
                                var ma = product.SP_MaDT1[i];

                                <div class="carousel-item">
                                    <a data-link="/Store/ProductDetail/@ma?index=@i" class="product__info p-b-40 relative">
                                        <div class=" product__info--new relative">
                                            @{
                                                if (product.SP_TinhTrangs1[i].Equals("False"))
                                                {
                                                    <p class="product__status">Mới</p>
                                                }
                                            }
                                            <img src="~/Assets/Image/Product/@product.SP_AnhDT1[i][0]" class="p-b-40" />
                                            <p class="product__name">@product.SP_Ten</p>
                                            <p class="product__price">@product.SP_GiaBans1[i]</p>
                                        </div>
                                    </a>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="product__list">
        <div class="text-center">
            <a href="/Store/Accessory" class="product__type">
                <img src="~/Assets/Image/Layout/Tag/accessory-tag.png" />
            </a>
        </div>
        <div class="row relative w-100">
            @foreach (var product in accessories)
            {
                <div class="h-3">
                    <div id="@product.SP_MaDT1[0]" class="carousel slide carousel-fade relative" data-interval="false">
                        <div class="carousel-inner">
                            @for (int i = 0; i < product.SP_MaDT1.Count; i++)
                            {
                                var ma = product.SP_MaDT1[i];

                                <div class="carousel-item">
                                    <a data-link="/Store/ProductDetail/@ma?index=@i" class="product__info p-b-40 relative">
                                        <div class=" product__info--new relative">
                                            @{
                                                if (product.SP_TinhTrangs1[i].Equals("False"))
                                                {
                                                    <p class="product__status">Mới</p>
                                                }
                                            }
                                            <img src="~/Assets/Image/Product/@product.SP_AnhDT1[i][0]" />
                                            <p class="product__name">@product.SP_Ten</p>
                                            <p class="product__price">@product.SP_GiaBans1[i]</p>
                                        </div>
                                    </a>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
        <script>
            var carouselItems = $(".product__list .h-3");
            var productLists = $(".product__list");
            var productInfos = $(".product__info");

            Array.from(productInfos).forEach(productInfo => {
                productInfo.addEventListener("click", e => {
                    e.preventDefault();

                    $.ajax({
                        url: productInfo.dataset.link,
                        success: function (result) {
                            $("#content").html(result);
                            document.documentElement.scrollTop = 0; 
                        }
                    })
                });
            });

            Array.from(carouselItems).forEach(item => {
                item.querySelector(".carousel-item").classList.add("active");
                if (item.querySelector(".carousel-indicators li")) {
                    item.querySelector(".carousel-indicators li").classList.add("active");
                }

                item.addEventListener("mouseout", (e) => {
                    item.querySelector(".carousel-item.active .product__info").style = `box-shadow: none;`;

                })
            });

            Array.from(productLists).forEach(productList => {
                productList.addEventListener("mouseover", (e) => {
                    if (e.target.closest(".product__memory li") || e.target.closest(".product__info")) {
                        var parent = getParentElement(e.target, ".carousel-fade");
                        parent.querySelector(".carousel-item.active .product__info").style = `box-shadow: 9px 9px 16px rgb(0 0 0 / 44%), -9px -9px 16px rgb(83 83 86);`;
                    }
                });
            });
        </script>
    </div>
</div>